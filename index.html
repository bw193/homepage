<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumina Mirrors | OEM/ODM Manufacturing</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Markdown Parser (for AI response formatting) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Lato"', 'sans-serif'],
                    },
                    colors: {
                        primary: '#1a1a1a',
                        accent: '#d4af37', // Gold
                        light: '#f9f9f9',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Lato', sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #d4af37;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #b39020;
        }
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .cart-overlay {
            background-color: rgba(0,0,0,0.5);
        }
        /* Hide all pages by default, only active class shows */
        .page-view {
            display: none;
        }
        .page-view.active {
            display: block;
        }
        /* Language Dropdown Logic */
        .lang-dropdown:hover .lang-menu {
            display: block;
        }
        
        /* AI Loading Animation */
        .sparkle-loader {
            display: inline-block;
            animation: sparkle 1.5s infinite linear;
        }
        @keyframes sparkle {
            0% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }

        /* Chat Widget Styles */
        .chat-widget {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 50;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }
        .chat-window {
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            border: 1px solid #f3f4f6;
            display: flex;
            flex-direction: column;
            margin-bottom: 1rem;
            overflow: hidden;
            transform-origin: bottom right;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .chat-window.hidden {
            display: none; /* Helper for JS toggle */
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background: #f9fafb;
        }
        .message {
            margin-bottom: 0.75rem;
            max-width: 80%;
            padding: 0.75rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            line-height: 1.4;
        }
        .message.user {
            background: #1a1a1a;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 0;
        }
        .message.bot {
            background: white;
            border: 1px solid #e5e7eb;
            color: #374151;
            margin-right: auto;
            border-bottom-left-radius: 0;
        }
        .typing-indicator span {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #d1d5db;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
            margin: 0 1px;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

        /* Customizer Preview */
        #preview-mirror {
            transition: all 0.5s ease;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .option-card {
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        .option-card.selected {
            border-color: #d4af37;
            background-color: #fffbeb;
        }
    </style>
</head>
<body class="text-gray-800 bg-white antialiased relative flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="sticky top-0 z-40 bg-white/95 backdrop-blur shadow-sm border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center cursor-pointer" onclick="navigateTo('home')">
                    <i class="fa-regular fa-gem text-accent text-2xl mr-2"></i>
                    <span class="font-serif text-2xl font-bold tracking-wide">LUMINA</span>
                    <span class="text-xs text-gray-400 ml-2 tracking-widest hidden sm:inline-block">MFG GROUP</span>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center">
                    <button onclick="navigateTo('home')" class="nav-link text-gray-600 hover:text-accent transition font-medium" data-i18n="nav_home">Home</button>
                    <button onclick="navigateTo('catalog')" class="nav-link text-gray-600 hover:text-accent transition font-medium" data-i18n="nav_catalog">Catalog</button>
                    <button onclick="navigateTo('customizer')" class="nav-link text-gray-600 hover:text-accent transition font-medium" data-i18n="nav_customizer">Customizer</button>
                    <button onclick="navigateTo('design-lab')" class="nav-link text-accent hover:text-yellow-600 transition font-bold flex items-center gap-1">
                        <i class="fa-solid fa-wand-magic-sparkles text-xs"></i> <span data-i18n="nav_design">Design Lab</span>
                    </button>
                    <button onclick="navigateTo('contact')" class="nav-link text-gray-600 hover:text-accent transition font-medium" data-i18n="nav_contact">Contact</button>
                </div>

                <!-- Icons & Language -->
                <div class="flex items-center space-x-6">
                    <!-- Language Switcher (Desktop) -->
                    <div class="relative lang-dropdown hidden md:block pb-2 pt-2">
                        <button class="flex items-center text-gray-600 hover:text-accent transition">
                            <i class="fa-solid fa-globe mr-2"></i>
                            <span id="current-lang-label" class="uppercase font-bold text-sm">EN</span>
                            <i class="fa-solid fa-chevron-down text-xs ml-1"></i>
                        </button>
                        <div class="lang-menu hidden absolute right-0 mt-0 w-32 bg-white border border-gray-100 shadow-lg rounded-md py-2 z-50">
                            <button onclick="changeLanguage('en')" class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-50 hover:text-accent transition">English</button>
                            <button onclick="changeLanguage('zh')" class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-50 hover:text-accent transition">中文 (CN)</button>
                            <button onclick="changeLanguage('fr')" class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-50 hover:text-accent transition">Français</button>
                        </div>
                    </div>

                    <button class="text-gray-600 hover:text-accent transition relative" onclick="toggleCart()">
                        <i class="fa-solid fa-clipboard-list text-xl"></i>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-accent text-white text-xs font-bold h-5 w-5 flex items-center justify-center rounded-full opacity-0 transition-opacity duration-300">0</span>
                    </button>
                    <button class="md:hidden text-gray-600 text-xl" onclick="toggleMobileMenu()">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 absolute w-full shadow-lg z-50">
            <div class="px-4 pt-2 pb-4 space-y-1">
                <button onclick="navigateTo('home'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-50 hover:text-accent" data-i18n="nav_home">Home</button>
                <button onclick="navigateTo('catalog'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-50 hover:text-accent" data-i18n="nav_catalog">Catalog</button>
                <button onclick="navigateTo('customizer'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-50 hover:text-accent" data-i18n="nav_customizer">Customizer</button>
                <button onclick="navigateTo('design-lab'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-accent font-bold hover:bg-gray-50" data-i18n="nav_design">Design Lab ✨</button>
                <button onclick="navigateTo('contact'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-50 hover:text-accent" data-i18n="nav_contact">Contact</button>
                
                <!-- Mobile Language Switch -->
                <div class="border-t border-gray-100 mt-2 pt-2">
                    <p class="px-3 text-xs text-gray-400 uppercase font-bold mb-1">Language</p>
                    <div class="flex space-x-4 px-3">
                        <button onclick="changeLanguage('en'); toggleMobileMenu()" class="text-sm font-bold text-gray-700 hover:text-accent">EN</button>
                        <button onclick="changeLanguage('zh'); toggleMobileMenu()" class="text-sm font-bold text-gray-700 hover:text-accent">中文</button>
                        <button onclick="changeLanguage('fr'); toggleMobileMenu()" class="text-sm font-bold text-gray-700 hover:text-accent">FR</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow">
        
        <!-- VIEW: HOME -->
        <div id="view-home" class="page-view active fade-in">
            <!-- Hero Section -->
            <section class="relative h-[80vh] flex items-center justify-center overflow-hidden">
                <div class="absolute inset-0 z-0">
                    <img src="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?q=80&w=2000&auto=format&fit=crop" alt="Modern Interior with Mirror" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-black/40"></div>
                </div>
                <div class="relative z-10 text-center text-white px-4 max-w-3xl">
                    <h1 class="text-5xl md:text-7xl font-bold mb-6 leading-tight" data-i18n="hero_title">Reflecting Excellence</h1>
                    <p class="text-lg md:text-xl mb-8 font-light opacity-90" data-i18n="hero_subtitle">Premier OEM/ODM partner for high-quality residential and commercial mirror solutions.</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="navigateTo('customizer')" class="bg-white text-gray-900 px-8 py-4 font-serif font-semibold tracking-wide hover:bg-accent hover:text-white transition duration-300" data-i18n="btn_start_custom">
                            Start Customizing
                        </button>
                        <button onclick="navigateTo('design-lab')" class="border border-accent bg-accent/20 backdrop-blur text-white px-8 py-4 font-serif font-semibold tracking-wide hover:bg-accent hover:text-white transition duration-300 flex items-center justify-center gap-2">
                            <i class="fa-solid fa-wand-magic-sparkles"></i> AI Design Lab
                        </button>
                    </div>
                </div>
            </section>

            <!-- Features Strip -->
            <section class="py-16 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-serif font-bold" data-i18n="why_choose_us">Why Choose Lumina MFG?</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                        <div class="p-6 bg-white shadow-sm rounded-lg hover:shadow-md transition">
                            <i class="fa-solid fa-pencil-ruler text-accent text-4xl mb-4"></i>
                            <h3 class="text-xl font-bold mb-2" data-i18n="feat_odm_title">Custom Design (ODM)</h3>
                            <p class="text-gray-500" data-i18n="feat_odm_desc">In-house R&D team ready to bring your sketches to production in 2 weeks.</p>
                        </div>
                        <div class="p-6 bg-white shadow-sm rounded-lg hover:shadow-md transition">
                            <i class="fa-solid fa-industry text-accent text-4xl mb-4"></i>
                            <h3 class="text-xl font-bold mb-2" data-i18n="feat_scale_title">Scalable Production</h3>
                            <p class="text-gray-500" data-i18n="feat_scale_desc">Monthly capacity of 50,000 units with strict ISO 9001 quality control.</p>
                        </div>
                        <div class="p-6 bg-white shadow-sm rounded-lg hover:shadow-md transition">
                            <i class="fa-solid fa-certificate text-accent text-4xl mb-4"></i>
                            <h3 class="text-xl font-bold mb-2" data-i18n="feat_cert_title">Certified Quality</h3>
                            <p class="text-gray-500" data-i18n="feat_cert_desc">CE, UL, and RoHS certified components for all LED and smart mirrors.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Featured Collection Preview -->
            <section class="py-20">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between items-end mb-10">
                        <div>
                            <h2 class="text-4xl font-bold mb-2 text-gray-900" data-i18n="feat_models_title">Featured Models</h2>
                            <p class="text-gray-500" data-i18n="feat_models_subtitle">Best-selling designs available for immediate white-labeling.</p>
                        </div>
                        <button onclick="navigateTo('catalog')" class="hidden md:inline-block text-accent font-bold hover:underline"><span data-i18n="link_view_all">View All Products</span> <i class="fa-solid fa-arrow-right ml-2"></i></button>
                    </div>
                    <div id="home-product-grid" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </section>
        </div>

        <!-- VIEW: CATALOG -->
        <div id="view-catalog" class="page-view fade-in">
            <div class="bg-gray-900 py-16 text-center">
                <h1 class="text-4xl md:text-5xl text-white font-serif font-bold" data-i18n="catalog_title">Product Catalog</h1>
                <p class="text-gray-400 mt-4" data-i18n="catalog_subtitle">Browse our complete range of mirror solutions</p>
            </div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <!-- Filters -->
                <div class="flex justify-center gap-4 mb-12 flex-wrap">
                    <button onclick="filterProducts('all')" class="filter-btn active px-6 py-2 border border-gray-300 hover:border-accent hover:text-accent transition rounded-full text-sm uppercase tracking-wider bg-gray-900 text-white border-gray-900" data-category="all" data-i18n="cat_all">All</button>
                    <button onclick="filterProducts('wall')" class="filter-btn px-6 py-2 border border-gray-300 hover:border-accent hover:text-accent transition rounded-full text-sm uppercase tracking-wider text-gray-600" data-category="wall" data-i18n="cat_wall">Wall</button>
                    <button onclick="filterProducts('floor')" class="filter-btn px-6 py-2 border border-gray-300 hover:border-accent hover:text-accent transition rounded-full text-sm uppercase tracking-wider text-gray-600" data-category="floor" data-i18n="cat_floor">Floor</button>
                    <button onclick="filterProducts('vanity')" class="filter-btn px-6 py-2 border border-gray-300 hover:border-accent hover:text-accent transition rounded-full text-sm uppercase tracking-wider text-gray-600" data-category="vanity" data-i18n="cat_vanity">Vanity / Smart</button>
                </div>

                <div id="catalog-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <!-- VIEW: CUSTOMIZER -->
        <div id="view-customizer" class="page-view fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <div class="text-center mb-12">
                    <h1 class="text-4xl font-serif font-bold mb-4" data-i18n="cust_title">Customizer Studio</h1>
                    <p class="text-gray-500" data-i18n="cust_subtitle">Build your perfect mirror specifications for manufacturing.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
                    <!-- Controls Column -->
                    <div class="lg:col-span-7 space-y-8">
                        
                        <!-- Dimensions -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <h3 class="font-bold text-lg mb-4" data-i18n="step_dims">1. Dimensions</h3>
                            <div class="grid grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm text-gray-500 mb-1" data-i18n="lbl_width">Width (cm)</label>
                                    <input type="range" id="cust-width" min="40" max="200" value="80" class="w-full accent-accent h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" oninput="updateCustomPreview()">
                                    <div class="text-right font-bold mt-1"><span id="val-width">80</span>cm</div>
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-500 mb-1" data-i18n="lbl_height">Height (cm)</label>
                                    <input type="range" id="cust-height" min="40" max="200" value="100" class="w-full accent-accent h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" oninput="updateCustomPreview()">
                                    <div class="text-right font-bold mt-1"><span id="val-height">100</span>cm</div>
                                </div>
                            </div>
                        </div>

                        <!-- Shape -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <h3 class="font-bold text-lg mb-4" data-i18n="step_shape">2. Shape</h3>
                            <div class="grid grid-cols-4 gap-4">
                                <div class="option-card p-4 rounded-lg border bg-gray-50 text-center selected" onclick="selectOption(this, 'shape', 'rect')" data-val="rect">
                                    <div class="h-10 w-8 border-2 border-gray-400 mx-auto mb-2"></div>
                                    <span class="text-xs font-bold" data-i18n="shape_rect">Rectangle</span>
                                </div>
                                <div class="option-card p-4 rounded-lg border bg-gray-50 text-center" onclick="selectOption(this, 'shape', 'round')" data-val="round">
                                    <div class="h-10 w-10 border-2 border-gray-400 rounded-full mx-auto mb-2"></div>
                                    <span class="text-xs font-bold" data-i18n="shape_round">Round</span>
                                </div>
                                <div class="option-card p-4 rounded-lg border bg-gray-50 text-center" onclick="selectOption(this, 'shape', 'capsule')" data-val="capsule">
                                    <div class="h-10 w-6 border-2 border-gray-400 rounded-full mx-auto mb-2"></div>
                                    <span class="text-xs font-bold" data-i18n="shape_capsule">Capsule</span>
                                </div>
                                <div class="option-card p-4 rounded-lg border bg-gray-50 text-center" onclick="selectOption(this, 'shape', 'oval')" data-val="oval">
                                    <div class="h-10 w-8 border-2 border-gray-400 rounded-[50%] mx-auto mb-2"></div>
                                    <span class="text-xs font-bold" data-i18n="shape_oval">Oval</span>
                                </div>
                            </div>
                        </div>

                        <!-- Frame Material -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <h3 class="font-bold text-lg mb-4" data-i18n="step_frame">3. Frame Material</h3>
                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                                <div class="option-card p-4 rounded-lg border bg-gray-50 text-center selected" onclick="selectOption(this, 'frame', 'none')" data-val="none">
                                    <div class="h-8 w-full bg-gray-200 mb-2"></div>
                                    <span class="text-xs font-bold" data-i18n="frame_none">Frameless</span>
                                </div>
                                <div class="option-card p-4 rounded-lg border bg-gray-50 text-center" onclick="selectOption(this, 'frame', 'aluminum')" data-val="aluminum">
                                    <div class="h-8 w-full bg-gray-800 mb-2"></div>
                                    <span class="text-xs font-bold" data-i18n="frame_alum">Aluminum (Black)</span>
                                </div>
                                <div class="option-card p-4 rounded-lg border bg-gray-50 text-center" onclick="selectOption(this, 'frame', 'brass')" data-val="brass">
                                    <div class="h-8 w-full bg-yellow-600 mb-2"></div>
                                    <span class="text-xs font-bold" data-i18n="frame_brass">Brushed Brass</span>
                                </div>
                                <div class="option-card p-4 rounded-lg border bg-gray-50 text-center" onclick="selectOption(this, 'frame', 'wood')" data-val="wood">
                                    <div class="h-8 w-full bg-yellow-900 mb-2"></div>
                                    <span class="text-xs font-bold" data-i18n="frame_wood">Solid Wood</span>
                                </div>
                            </div>
                        </div>

                        <!-- Functions -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <h3 class="font-bold text-lg mb-4" data-i18n="step_func">4. Smart Functions</h3>
                            <div class="grid grid-cols-2 gap-4">
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition">
                                    <input type="checkbox" class="cust-func accent-accent h-5 w-5" value="Bluetooth Speaker">
                                    <span class="ml-3 font-medium" data-i18n="func_bt">Bluetooth Audio</span>
                                </label>
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition">
                                    <input type="checkbox" class="cust-func accent-accent h-5 w-5" value="Anti-fog System">
                                    <span class="ml-3 font-medium" data-i18n="func_fog">Anti-fog / Defogger</span>
                                </label>
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition">
                                    <input type="checkbox" class="cust-func accent-accent h-5 w-5" value="RGB Backlight">
                                    <span class="ml-3 font-medium" data-i18n="func_rgb">RGB Backlight</span>
                                </label>
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition">
                                    <input type="checkbox" class="cust-func accent-accent h-5 w-5" value="Time/Temp Display">
                                    <span class="ml-3 font-medium" data-i18n="func_disp">Time/Temp Display</span>
                                </label>
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition">
                                    <input type="checkbox" class="cust-func accent-accent h-5 w-5" value="Gesture Control">
                                    <span class="ml-3 font-medium" data-i18n="func_gest">Gesture Control</span>
                                </label>
                            </div>
                        </div>

                        <button onclick="addCustomConfigToCart()" class="w-full bg-gray-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-accent transition shadow-lg" data-i18n="btn_add_config">
                            Add Configuration to Inquiry
                        </button>

                    </div>

                    <!-- Preview Column -->
                    <div class="lg:col-span-5">
                        <div class="sticky top-28">
                            <div class="bg-gray-100 rounded-2xl p-8 h-[500px] flex items-center justify-center relative overflow-hidden">
                                <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#000 1px, transparent 1px); background-size: 20px 20px;"></div>
                                
                                <!-- Dynamic Preview Element -->
                                <div id="preview-mirror" class="bg-white relative shadow-2xl flex items-center justify-center overflow-hidden">
                                    <!-- Reflection placeholder -->
                                    <div class="absolute inset-0 bg-gradient-to-tr from-blue-50 to-white opacity-50"></div>
                                    <div class="absolute top-0 left-0 w-full h-full bg-white/30 skew-x-12 transform -translate-x-full animate-shine"></div>
                                    
                                    <span class="text-gray-300 font-serif italic text-xl z-10 relative">Lumina</span>
                                </div>
                            </div>
                            <div class="mt-6 bg-white p-6 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Configuration Summary</h4>
                                <ul class="text-sm text-gray-600 space-y-1" id="preview-summary">
                                    <li>80cm x 100cm</li>
                                    <li>Rectangle</li>
                                    <li>Frameless</li>
                                    <li>No Smart Functions</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: AI DESIGN LAB -->
        <div id="view-design-lab" class="page-view fade-in">
            <div class="bg-gradient-to-r from-gray-900 to-gray-800 py-20 text-center text-white relative overflow-hidden">
                <div class="absolute inset-0 opacity-10">
                    <i class="fa-solid fa-wand-magic-sparkles absolute top-10 left-10 text-9xl"></i>
                    <i class="fa-regular fa-lightbulb absolute bottom-10 right-10 text-9xl"></i>
                </div>
                <div class="relative z-10 max-w-4xl mx-auto px-4">
                    <div class="inline-block bg-accent/20 backdrop-blur-sm border border-accent/50 rounded-full px-4 py-1 mb-4">
                        <span class="text-accent font-bold text-sm tracking-wider"><i class="fa-solid fa-bolt"></i> POWERED BY GEMINI AI</span>
                    </div>
                    <h1 class="text-4xl md:text-6xl font-serif font-bold mb-6" data-i18n="design_title">AI Design Consultant</h1>
                    <p class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto" data-i18n="design_subtitle">
                        Two ways to innovate: Describe your vision textually, or upload a photo of your space for visual analysis.
                    </p>
                </div>
            </div>

            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16 -mt-10 relative z-20 space-y-12">
                
                <!-- TOOL 1: Text to Concept -->
                <div class="bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden">
                    <div class="bg-gray-50 border-b border-gray-100 p-4 px-8 flex items-center gap-3">
                        <i class="fa-solid fa-pen-nib text-accent"></i>
                        <h3 class="font-bold text-gray-700" data-i18n="opt1_title">Option 1: Text to Specification</h3>
                    </div>
                    <div class="p-8 md:p-12">
                        <label class="block text-gray-700 font-bold mb-4 text-lg" data-i18n="opt1_label">Describe your idea:</label>
                        <div class="relative">
                            <textarea id="ai-prompt" rows="3" class="w-full bg-gray-50 border border-gray-200 rounded-lg p-4 text-gray-800 focus:outline-none focus:border-accent focus:ring-1 focus:ring-accent transition resize-none" placeholder="e.g., A large oval mirror for a luxury hotel lobby..."></textarea>
                        </div>
                        <div class="mt-4 flex justify-end">
                            <button onclick="generateDesign()" id="btn-generate" class="bg-gray-900 text-white px-6 py-3 rounded-lg font-bold hover:bg-accent transition shadow-lg flex items-center gap-2">
                                <i class="fa-solid fa-wand-magic-sparkles"></i> <span data-i18n="btn_generate">Generate Concept</span>
                            </button>
                        </div>
                    </div>
                    <!-- Output Section (Shared) -->
                    <div id="ai-output-section" class="hidden border-t border-gray-100 bg-gray-50 p-8 md:p-12 transition-all">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="h-10 w-10 bg-gray-900 rounded-full flex items-center justify-center text-accent">
                                <i class="fa-solid fa-robot"></i>
                            </div>
                            <h3 class="text-xl font-serif font-bold text-gray-900" data-i18n="ai_rec_title">AI Recommendation</h3>
                        </div>
                        <div id="ai-result-content" class="prose prose-sm max-w-none text-gray-600 bg-white p-6 rounded-lg border border-gray-200 shadow-sm mb-8"></div>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <button onclick="addCustomToCart()" class="flex-1 bg-gray-900 text-white px-6 py-4 rounded-lg font-bold hover:bg-gray-800 transition shadow">
                                <i class="fa-solid fa-plus mr-2"></i> <span data-i18n="btn_add_custom">Add Concept to Inquiry List</span>
                            </button>
                            <button onclick="document.getElementById('ai-output-section').classList.add('hidden');" class="px-6 py-4 border border-gray-300 rounded-lg font-bold hover:bg-white transition text-gray-600" data-i18n="btn_close">
                                Close
                            </button>
                        </div>
                    </div>
                </div>

                <!-- TOOL 2: Image to Concept -->
                <div class="bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden">
                    <div class="bg-gray-50 border-b border-gray-100 p-4 px-8 flex items-center gap-3">
                        <i class="fa-solid fa-camera text-accent"></i>
                        <h3 class="font-bold text-gray-700" data-i18n="opt2_title">Option 2: Room Visual Analyzer</h3>
                    </div>
                    <div class="p-8 md:p-12 grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h4 class="font-bold text-lg mb-2" data-i18n="upload_title">Upload a Room Photo</h4>
                            <p class="text-gray-500 mb-6 text-sm" data-i18n="opt2_desc">Our AI will analyze the interior style, lighting conditions, and color palette of your room to recommend the perfect mirror specifications.</p>
                            
                            <div class="relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:bg-gray-50 transition cursor-pointer" onclick="document.getElementById('room-upload').click()">
                                <input type="file" id="room-upload" class="hidden" accept="image/*" onchange="handleImagePreview(this)">
                                <i class="fa-solid fa-cloud-arrow-up text-3xl text-gray-300 mb-3"></i>
                                <p class="text-sm font-bold text-gray-600" data-i18n="upload_text">Click to upload photo</p>
                                <p class="text-xs text-gray-400" data-i18n="upload_sub">JPG, PNG up to 5MB</p>
                            </div>
                        </div>
                        <div class="flex flex-col items-center justify-center h-full min-h-[200px] bg-gray-100 rounded-lg overflow-hidden relative">
                            <img id="image-preview" class="w-full h-full object-contain hidden" alt="Room Preview">
                            <div id="image-placeholder" class="text-gray-400 text-sm" data-i18n="no_img">No image selected</div>
                        </div>
                    </div>
                    <div class="px-8 pb-8 md:px-12 md:pb-12 flex justify-end">
                        <button onclick="analyzeRoom()" id="btn-analyze" disabled class="bg-gray-300 text-white px-6 py-3 rounded-lg font-bold transition shadow-lg flex items-center gap-2 cursor-not-allowed">
                            <i class="fa-solid fa-eye"></i> <span data-i18n="btn_analyze">Analyze Space</span>
                        </button>
                    </div>
                </div>

            </div>
        </div>

        <!-- VIEW: ABOUT -->
        <div id="view-about" class="page-view fade-in">
            <!-- ... existing about code ... -->
            <div class="bg-gray-100 py-16 text-center">
                <h1 class="text-4xl md:text-5xl font-serif font-bold" data-i18n="about_title">About Our Factory</h1>
            </div>
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center mb-16">
                    <div>
                        <img src="https://images.unsplash.com/photo-1565514020176-db792f3b7936?q=80&w=1000&auto=format&fit=crop" alt="Factory Floor" class="rounded-lg shadow-xl w-full">
                    </div>
                    <div>
                        <h2 class="text-3xl font-serif font-bold mb-6" data-i18n="legacy_title">A Legacy of Reflection</h2>
                        <p class="text-gray-600 mb-4 leading-relaxed" data-i18n="legacy_text1">
                            Founded in 2005, Lumina Mirrors Mfg Group has grown from a small glass workshop into a leading global supplier of premium mirrors. We specialize in working with hospitality brands, interior design firms, and retail chains to produce bespoke mirror solutions.
                        </p>
                        <p class="text-gray-600 mb-6 leading-relaxed" data-i18n="legacy_text2">
                            Our 50,000 sq. ft. facility combines traditional craftsmanship with modern CNC technology, ensuring every piece meets rigorous international standards.
                        </p>
                        <ul class="space-y-3">
                            <li class="flex items-center text-gray-700"><i class="fa-solid fa-check text-accent mr-3"></i> <span data-i18n="cert_iso">ISO 9001:2015 Certified Facility</span></li>
                            <li class="flex items-center text-gray-700"><i class="fa-solid fa-check text-accent mr-3"></i> <span data-i18n="cert_eco">5mm Copper-Free Silver Mirror (Eco-Friendly)</span></li>
                            <li class="flex items-center text-gray-700"><i class="fa-solid fa-check text-accent mr-3"></i> <span data-i18n="cert_led">Custom LED Integration Specialists</span></li>
                        </ul>
                    </div>
                </div>
                <div class="bg-gray-900 text-white rounded-2xl p-12 text-center">
                    <h2 class="text-3xl font-serif font-bold mb-8" data-i18n="process_title">Our Process</h2>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                        <div>
                            <div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4">1</div>
                            <h3 class="font-bold mb-2" data-i18n="proc_1_title">Consultation</h3>
                            <p class="text-gray-400 text-sm" data-i18n="proc_1_desc">Design review & material selection.</p>
                        </div>
                        <div>
                            <div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4">2</div>
                            <h3 class="font-bold mb-2" data-i18n="proc_2_title">Prototyping</h3>
                            <p class="text-gray-400 text-sm" data-i18n="proc_2_desc">Sample production within 7-10 days.</p>
                        </div>
                        <div>
                            <div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4">3</div>
                            <h3 class="font-bold mb-2" data-i18n="proc_3_title">Manufacturing</h3>
                            <p class="text-gray-400 text-sm" data-i18n="proc_3_desc">Bulk production with QC at every stage.</p>
                        </div>
                        <div>
                            <div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4">4</div>
                            <h3 class="font-bold mb-2" data-i18n="proc_4_title">Logistics</h3>
                            <p class="text-gray-400 text-sm" data-i18n="proc_4_desc">Secure packaging & global shipping.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: CONTACT -->
        <div id="view-contact" class="page-view fade-in">
            <!-- ... existing contact code ... -->
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
                    <div>
                        <h1 class="text-4xl font-serif font-bold mb-6" data-i18n="contact_title">Get in Touch</h1>
                        <p class="text-gray-600 mb-8" data-i18n="contact_desc">
                            Ready to start your project? Fill out the form below or contact our sales team directly. We typically respond within 24 hours.
                        </p>
                        <div class="space-y-6">
                            <div class="flex items-start">
                                <div class="bg-gray-100 p-4 rounded-full mr-4">
                                    <i class="fa-solid fa-location-dot text-accent text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-900" data-i18n="addr_title">Factory Address</h3>
                                    <p class="text-gray-500">123 Industrial Ave, Building 4<br>Manufacturing District, NY 10001</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-gray-100 p-4 rounded-full mr-4">
                                    <i class="fa-solid fa-envelope text-accent text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-900" data-i18n="email_title">Email Us</h3>
                                    <p class="text-gray-500">sales@luminamirrors.com</p>
                                    <p class="text-gray-500">support@luminamirrors.com</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-gray-100 p-4 rounded-full mr-4">
                                    <i class="fa-solid fa-phone text-accent text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-900" data-i18n="call_title">Call Us</h3>
                                    <p class="text-gray-500">+1 (555) 123-4567</p>
                                    <p class="text-xs text-gray-400">Mon-Fri, 9am - 6pm EST</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-8 shadow-lg rounded-xl border border-gray-100">
                        <h3 class="text-2xl font-bold mb-6" data-i18n="form_title">Send an Inquiry</h3>
                        <form onsubmit="event.preventDefault(); showToast('Message sent!');" class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_fname">First Name</label>
                                    <input type="text" class="w-full bg-gray-50 border border-gray-200 rounded p-3 focus:outline-none focus:border-accent" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_lname">Last Name</label>
                                    <input type="text" class="w-full bg-gray-50 border border-gray-200 rounded p-3 focus:outline-none focus:border-accent" required>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_company">Company Name</label>
                                <input type="text" class="w-full bg-gray-50 border border-gray-200 rounded p-3 focus:outline-none focus:border-accent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_email">Email Address</label>
                                <input type="email" class="w-full bg-gray-50 border border-gray-200 rounded p-3 focus:outline-none focus:border-accent" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_msg">Message</label>
                                <textarea rows="4" class="w-full bg-gray-50 border border-gray-200 rounded p-3 focus:outline-none focus:border-accent"></textarea>
                            </div>
                            <button class="w-full bg-gray-900 text-white font-bold py-4 hover:bg-accent transition duration-300" data-i18n="btn_send_msg">
                                Send Message
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: PRODUCT DETAIL -->
        <div id="view-product-detail" class="page-view fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <button onclick="navigateTo('catalog')" class="mb-8 text-gray-500 hover:text-gray-900 flex items-center">
                    <i class="fa-solid fa-arrow-left mr-2"></i> <span data-i18n="back_catalog">Back to Catalog</span>
                </button>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12" id="detail-container">
                    <!-- Dynamic Content -->
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-100 pt-12 pb-8 mt-auto">
        <!-- ... existing footer ... -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div class="col-span-1 md:col-span-1">
                    <span class="font-serif text-2xl font-bold tracking-wide text-gray-900">LUMINA</span>
                    <p class="text-gray-500 mt-4 text-sm" data-i18n="footer_desc">Premier OEM/ODM mirror manufacturer for global brands.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4" data-i18n="footer_nav">Navigate</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li><button onclick="navigateTo('home')" class="hover:text-accent" data-i18n="nav_home">Home</button></li>
                        <li><button onclick="navigateTo('catalog')" class="hover:text-accent" data-i18n="nav_catalog">Catalog</button></li>
                        <li><button onclick="navigateTo('customizer')" class="hover:text-accent" data-i18n="nav_customizer">Customizer</button></li>
                        <li><button onclick="navigateTo('about')" class="hover:text-accent" data-i18n="nav_about">About Us</button></li>
                        <li><button onclick="navigateTo('contact')" class="hover:text-accent" data-i18n="nav_contact">Contact</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4" data-i18n="footer_legal">Legal</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li><a href="#" class="hover:text-accent">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-accent">Terms of Service</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4" data-i18n="footer_connect">Connect</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-accent text-xl"><i class="fa-brands fa-linkedin"></i></a>
                        <a href="#" class="text-gray-400 hover:text-accent text-xl"><i class="fa-brands fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-100 pt-8 text-center text-gray-400 text-xs">
                &copy; 2023 Lumina Mirrors Mfg Group. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Quote Request Slide-over -->
    <div id="cart-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 cart-overlay transition-opacity" onclick="toggleCart()"></div>
        <div class="absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl flex flex-col transform transition-transform duration-300 translate-x-full" id="cart-panel">
            <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                <h2 class="text-2xl font-serif font-bold" data-i18n="cart_title">Inquiry List</h2>
                <button onclick="toggleCart()" class="text-gray-400 hover:text-red-500">
                    <i class="fa-solid fa-xmark text-2xl"></i>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6">
                <div id="cart-items-container" class="space-y-6">
                    <!-- Items injected here -->
                </div>
                <div class="text-center text-gray-500 mt-10 hidden" id="empty-cart-msg" data-i18n="cart_empty">
                    Your inquiry list is empty.
                </div>
            </div>
            <div class="p-6 border-t border-gray-100 bg-gray-50">
                <div class="mb-4 text-sm text-gray-500" data-i18n="cart_help">
                    Add items to this list to request a bulk quote or custom modification.
                </div>
                <button onclick="sendInquiry()" class="w-full bg-gray-900 text-white py-4 font-bold uppercase tracking-wider hover:bg-accent transition duration-300" data-i18n="btn_req_email">
                    Request Quote via Email
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 pointer-events-none z-50 flex items-center gap-2">
        <i class="fa-solid fa-check-circle text-accent"></i>
        <span id="toast-message">Added to list</span>
    </div>

    <!-- Chat Widget -->
    <div class="chat-widget">
        <!-- Chat Window -->
        <div id="chat-window" class="chat-window hidden scale-95 opacity-0">
            <!-- Header -->
            <div class="bg-gray-900 text-white p-4 flex justify-between items-center cursor-pointer" onclick="toggleChat()">
                <div class="flex items-center gap-3">
                    <div class="relative">
                        <div class="h-8 w-8 bg-white/10 rounded-full flex items-center justify-center">
                            <i class="fa-solid fa-robot text-accent text-sm"></i>
                        </div>
                        <div class="absolute bottom-0 right-0 h-2.5 w-2.5 bg-green-500 rounded-full border-2 border-gray-900"></div>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm">Lumina Assistant</h4>
                        <p class="text-xs text-gray-400">Online | Powered by Gemini</p>
                    </div>
                </div>
                <i class="fa-solid fa-chevron-down text-gray-400"></i>
            </div>
            
            <!-- Messages -->
            <div id="chat-messages" class="chat-messages">
                <div class="message bot">
                    Hello! I'm your factory assistant. Ask me about our products, MOQs, or custom manufacturing capabilities.
                </div>
            </div>
            
            <!-- Input -->
            <div class="p-4 bg-white border-t border-gray-100">
                <form onsubmit="event.preventDefault(); sendChatMessage();" class="flex gap-2">
                    <input type="text" id="chat-input" class="flex-1 bg-gray-50 border border-gray-200 rounded-full px-4 py-2 text-sm focus:outline-none focus:border-accent" placeholder="Type a message...">
                    <button type="submit" class="h-9 w-9 bg-accent text-white rounded-full flex items-center justify-center hover:bg-yellow-600 transition">
                        <i class="fa-solid fa-paper-plane text-xs"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Chat Toggle Button -->
        <button onclick="toggleChat()" id="chat-toggle-btn" class="h-14 w-14 bg-gray-900 text-white rounded-full shadow-2xl flex items-center justify-center hover:bg-accent transition transform hover:scale-105">
            <i class="fa-solid fa-comment-dots text-2xl"></i>
        </button>
    </div>

    <!-- Javascript Logic -->
    <script>
        // API Configuration
        const apiKey = ""; // Set by environment

        // Translation Dictionary
        const translations = {
            en: {
                nav_home: "Home",
                nav_catalog: "Catalog",
                nav_customizer: "Customizer",
                nav_design: "Design Lab ✨",
                nav_about: "About Factory",
                nav_contact: "Contact",
                hero_title: "Reflecting Excellence",
                hero_subtitle: "Premier OEM/ODM partner for high-quality residential and commercial mirror solutions.",
                btn_view_catalog: "View Catalog",
                btn_get_quote: "Get a Quote",
                btn_start_custom: "Start Customizing",
                why_choose_us: "Why Choose Lumina MFG?",
                feat_odm_title: "Custom Design (ODM)",
                feat_odm_desc: "In-house R&D team ready to bring your sketches to production in 2 weeks.",
                feat_scale_title: "Scalable Production",
                feat_scale_desc: "Monthly capacity of 50,000 units with strict ISO 9001 quality control.",
                feat_cert_title: "Certified Quality",
                feat_cert_desc: "CE, UL, and RoHS certified components for all LED and smart mirrors.",
                feat_models_title: "Featured Models",
                feat_models_subtitle: "Best-selling designs available for immediate white-labeling.",
                link_view_all: "View All Products",
                catalog_title: "Product Catalog",
                catalog_subtitle: "Browse our complete range of mirror solutions",
                cat_all: "All",
                cat_wall: "Wall",
                cat_floor: "Floor",
                cat_vanity: "Vanity / Smart",
                about_title: "About Our Factory",
                legacy_title: "A Legacy of Reflection",
                legacy_text1: "Founded in 2005, Lumina Mirrors Mfg Group has grown from a small glass workshop into a leading global supplier of premium mirrors. We specialize in working with hospitality brands, interior design firms, and retail chains to produce bespoke mirror solutions.",
                legacy_text2: "Our 50,000 sq. ft. facility combines traditional craftsmanship with modern CNC technology, ensuring every piece meets rigorous international standards.",
                cert_iso: "ISO 9001:2015 Certified Facility",
                cert_eco: "5mm Copper-Free Silver Mirror (Eco-Friendly)",
                cert_led: "Custom LED Integration Specialists",
                process_title: "Our Process",
                proc_1_title: "Consultation",
                proc_1_desc: "Design review & material selection.",
                proc_2_title: "Prototyping",
                proc_2_desc: "Sample production within 7-10 days.",
                proc_3_title: "Manufacturing",
                proc_3_desc: "Bulk production with QC at every stage.",
                proc_4_title: "Logistics",
                proc_4_desc: "Secure packaging & global shipping.",
                contact_title: "Get in Touch",
                contact_desc: "Ready to start your project? Fill out the form below or contact our sales team directly. We typically respond within 24 hours.",
                addr_title: "Factory Address",
                email_title: "Email Us",
                call_title: "Call Us",
                form_title: "Send an Inquiry",
                lbl_fname: "First Name",
                lbl_lname: "Last Name",
                lbl_company: "Company Name",
                lbl_email: "Email Address",
                lbl_msg: "Message",
                btn_send_msg: "Send Message",
                back_catalog: "Back to Catalog",
                footer_desc: "Premier OEM/ODM mirror manufacturer for global brands.",
                footer_nav: "Navigate",
                footer_legal: "Legal",
                footer_connect: "Connect",
                cart_title: "Inquiry List",
                cart_empty: "Your inquiry list is empty.",
                cart_help: "Add items to this list to request a bulk quote or custom modification.",
                btn_req_email: "Request Quote via Email",
                // Customizer Translations
                cust_title: "Customizer Studio",
                cust_subtitle: "Build your perfect mirror specifications for manufacturing.",
                step_dims: "1. Dimensions",
                lbl_width: "Width (cm)",
                lbl_height: "Height (cm)",
                step_shape: "2. Shape",
                shape_rect: "Rectangle",
                shape_round: "Round",
                shape_capsule: "Capsule",
                shape_oval: "Oval",
                step_frame: "3. Frame Material",
                frame_none: "Frameless",
                frame_alum: "Aluminum (Black)",
                frame_brass: "Brushed Brass",
                frame_wood: "Solid Wood",
                step_func: "4. Smart Functions",
                func_bt: "Bluetooth Audio",
                func_fog: "Anti-fog / Defogger",
                func_rgb: "RGB Backlight",
                func_disp: "Time/Temp Display",
                func_gest: "Gesture Control",
                btn_add_config: "Add Configuration to Inquiry",
                // AI Design Lab
                design_title: "AI Design Consultant",
                design_subtitle: "Two ways to innovate: Describe your vision textually, or upload a photo of your space for visual analysis.",
                opt1_title: "Option 1: Text to Specification",
                opt1_label: "Describe your idea:",
                btn_generate: "Generate Concept",
                opt2_title: "Option 2: Room Visual Analyzer",
                opt2_desc: "Our AI will analyze the interior style, lighting conditions, and color palette of your room to recommend the perfect mirror specifications.",
                upload_title: "Upload a Room Photo",
                upload_text: "Click to upload photo",
                upload_sub: "JPG, PNG up to 5MB",
                btn_analyze: "Analyze Space",
                ai_rec_title: "AI Recommendation",
                btn_add_custom: "Add Concept to Inquiry List",
                btn_close: "Close",
                no_img: "No image selected",
                prompt_ph: "e.g., A large oval mirror for a luxury hotel lobby...",
                // Dynamic JS Labels
                lbl_view_details: "View Details",
                lbl_model_id: "Model ID",
                lbl_dims: "Dimensions",
                lbl_moq: "Min. Order Qty",
                lbl_mat_feat: "Material & Features:",
                btn_add_list: "Add to Inquiry List",
                btn_ask_q: "Ask Question",
                toast_added: "Added to list"
            },
            zh: {
                nav_home: "首页",
                nav_catalog: "产品目录",
                nav_customizer: "定制工作室",
                nav_design: "AI 设计室 ✨",
                nav_about: "工厂简介",
                nav_contact: "联系我们",
                hero_title: "映照卓越品质",
                hero_subtitle: "高端住宅和商业镜子解决方案的首选 OEM/ODM 合作伙伴。",
                btn_view_catalog: "查看目录",
                btn_get_quote: "获取报价",
                btn_start_custom: "开始定制",
                why_choose_us: "为什么选择 Lumina?",
                feat_odm_title: "定制设计 (ODM)",
                feat_odm_desc: "内部研发团队，2周内将您的设计草图转化为产品。",
                feat_scale_title: "规模化生产",
                feat_scale_desc: "月产能50,000台，严格执行ISO 9001质量控制。",
                feat_cert_title: "认证质量",
                feat_cert_desc: "所有LED和智能镜子均采用CE, UL, RoHS认证组件。",
                feat_models_title: "精选型号",
                feat_models_subtitle: "最畅销设计，可直接贴牌生产。",
                link_view_all: "查看所有产品",
                catalog_title: "产品目录",
                catalog_subtitle: "浏览我们完整的镜子解决方案",
                cat_all: "全部",
                cat_wall: "壁挂镜",
                cat_floor: "落地镜",
                cat_vanity: "浴室/智能镜",
                about_title: "关于我们工厂",
                legacy_title: "品质传承",
                legacy_text1: "Lumina Mirrors Mfg Group 成立于2005年，从一家小型玻璃作坊发展成为全球领先的高端镜子供应商。我们专注于与酒店品牌、室内设计公司和零售连锁店合作，生产定制镜子解决方案。",
                legacy_text2: "我们拥有50,000平方英尺的工厂，结合传统工艺与现代CNC技术，确保每件产品符合严格的国际标准。",
                cert_iso: "ISO 9001:2015 认证工厂",
                cert_eco: "5mm 无铜银镜 (环保)",
                cert_led: "定制LED集成专家",
                process_title: "生产流程",
                proc_1_title: "咨询",
                proc_1_desc: "设计评审与材料选择。",
                proc_2_title: "打样",
                proc_2_desc: "7-10天内完成样品制作。",
                proc_3_title: "制造",
                proc_3_desc: "每个阶段均有质量控制的批量生产。",
                proc_4_title: "物流",
                proc_4_desc: "安全包装与全球运输。",
                contact_title: "联系我们",
                contact_desc: "准备好开始您的项目了吗？请填写下面的表格或直接联系我们的销售团队。通常在24小时内回复。",
                addr_title: "工厂地址",
                email_title: "电子邮箱",
                call_title: "致电我们",
                form_title: "发送询盘",
                lbl_fname: "名字",
                lbl_lname: "姓氏",
                lbl_company: "公司名称",
                lbl_email: "邮箱地址",
                lbl_msg: "留言内容",
                btn_send_msg: "发送留言",
                back_catalog: "返回目录",
                footer_desc: "全球品牌的首选 OEM/ODM 镜子制造商。",
                footer_nav: "导航",
                footer_legal: "法律条款",
                footer_connect: "关注我们",
                cart_title: "询价单",
                cart_empty: "您的询价单为空。",
                cart_help: "将商品添加到此列表以申请批量报价或定制修改。",
                btn_req_email: "通过邮件询价",
                // Customizer Translations
                cust_title: "定制工作室",
                cust_subtitle: "为生产打造您的完美镜子规格。",
                step_dims: "1. 尺寸",
                lbl_width: "宽度 (cm)",
                lbl_height: "高度 (cm)",
                step_shape: "2. 形状",
                shape_rect: "矩形",
                shape_round: "圆形",
                shape_capsule: "胶囊形",
                shape_oval: "椭圆形",
                step_frame: "3. 边框材质",
                frame_none: "无框",
                frame_alum: "铝合金 (黑色)",
                frame_brass: "拉丝黄铜",
                frame_wood: "实木",
                step_func: "4. 智能功能",
                func_bt: "蓝牙音响",
                func_fog: "防雾功能",
                func_rgb: "RGB 背光",
                func_disp: "时间/温度显示",
                func_gest: "手势控制",
                btn_add_config: "添加到询价单",
                // AI Design Lab
                design_title: "AI 设计顾问",
                design_subtitle: "两种创新方式：文字描述您的愿景，或上传空间照片进行视觉分析。",
                opt1_title: "选项 1：文字转规格",
                opt1_label: "描述您的想法：",
                btn_generate: "生成方案",
                opt2_title: "选项 2：空间视觉分析",
                opt2_desc: "我们的 AI 将分析您房间的室内风格、光照条件和配色方案，以推荐完美的镜子规格。",
                upload_title: "上传房间照片",
                upload_text: "点击上传照片",
                upload_sub: "JPG, PNG 最大 5MB",
                btn_analyze: "分析空间",
                ai_rec_title: "AI 推荐",
                btn_add_custom: "添加到询价单",
                btn_close: "关闭",
                no_img: "未选择图片",
                prompt_ph: "例如：豪华酒店大堂的大型椭圆形镜子...",
                // Dynamic
                lbl_view_details: "查看详情",
                lbl_model_id: "型号 ID",
                lbl_dims: "尺寸",
                lbl_moq: "最小起订量",
                lbl_mat_feat: "材质与功能：",
                btn_add_list: "加入询价单",
                btn_ask_q: "咨询问题",
                toast_added: "已加入列表"
            },
            fr: {
                nav_home: "Accueil",
                nav_catalog: "Catalogue",
                nav_customizer: "Personnaliser",
                nav_design: "Labo Design ✨",
                nav_about: "L'Usine",
                nav_contact: "Contact",
                hero_title: "Le Reflet de l'Excellence",
                hero_subtitle: "Partenaire OEM/ODM de premier plan pour des solutions de miroirs résidentiels et commerciaux de haute qualité.",
                btn_view_catalog: "Voir le Catalogue",
                btn_get_quote: "Obtenir un Devis",
                btn_start_custom: "Commencer à Personnaliser",
                why_choose_us: "Pourquoi Choisir Lumina ?",
                feat_odm_title: "Design Personnalisé (ODM)",
                feat_odm_desc: "Équipe R&D interne prête à transformer vos croquis en production en 2 semaines.",
                feat_scale_title: "Production Évolutive",
                feat_scale_desc: "Capacité mensuelle de 50 000 unités avec un contrôle qualité strict ISO 9001.",
                feat_cert_title: "Qualité Certifiée",
                feat_cert_desc: "Composants certifiés CE, UL et RoHS pour tous les miroirs LED et intelligents.",
                feat_models_title: "Modèles en Vedette",
                feat_models_subtitle: "Designs les plus vendus disponibles pour un étiquetage privé immédiat.",
                link_view_all: "Voir Tous les Produits",
                catalog_title: "Catalogue Produits",
                catalog_subtitle: "Parcourez notre gamme complète de solutions de miroirs",
                cat_all: "Tous",
                cat_wall: "Murale",
                cat_floor: "Sur Pied",
                cat_vanity: "Salle de Bain / Smart",
                about_title: "À Propos de Notre Usine",
                legacy_title: "Un Héritage de Réflexion",
                legacy_text1: "Fondé en 2005, Lumina Mirrors Mfg Group est passé d'un petit atelier de verre à un fournisseur mondial de miroirs haut de gamme. Nous sommes spécialisés dans la collaboration avec des marques hôtelières et des chaînes de vente au détail.",
                legacy_text2: "Notre installation de 50 000 pieds carrés combine l'artisanat traditionnel avec la technologie CNC moderne, garantissant que chaque pièce répond aux normes internationales rigoureuses.",
                cert_iso: "Installation Certifiée ISO 9001:2015",
                cert_eco: "Miroir Argent Sans Cuivre 5mm (Écologique)",
                cert_led: "Spécialistes de l'Intégration LED",
                process_title: "Notre Processus",
                proc_1_title: "Consultation",
                proc_1_desc: "Revue de conception et sélection des matériaux.",
                proc_2_title: "Prototypage",
                proc_2_desc: "Production d'échantillons sous 7 à 10 jours.",
                proc_3_title: "Fabrication",
                proc_3_desc: "Production en vrac avec contrôle qualité à chaque étape.",
                proc_4_title: "Logistique",
                proc_4_desc: "Emballage sécurisé et expédition mondiale.",
                contact_title: "Contactez-nous",
                contact_desc: "Prêt à démarrer votre projet ? Remplissez le formulaire ci-dessous ou contactez directement notre équipe commerciale.",
                addr_title: "Adresse de l'Usine",
                email_title: "Envoyez-nous un Email",
                call_title: "Appelez-nous",
                form_title: "Envoyer une Demande",
                lbl_fname: "Prénom",
                lbl_lname: "Nom",
                lbl_company: "Nom de l'Entreprise",
                lbl_email: "Adresse Email",
                lbl_msg: "Message",
                btn_send_msg: "Envoyer le Message",
                back_catalog: "Retour au Catalogue",
                footer_desc: "Fabricant de miroirs OEM/ODM de premier plan pour les marques mondiales.",
                footer_nav: "Naviguer",
                footer_legal: "Légal",
                footer_connect: "Connecter",
                cart_title: "Liste de Demande",
                cart_empty: "Votre liste de demande est vide.",
                cart_help: "Ajoutez des articles à cette liste pour demander un devis en gros ou une modification personnalisée.",
                btn_req_email: "Demander un Devis par Email",
                // Customizer Translations
                cust_title: "Studio de Personnalisation",
                cust_subtitle: "Créez vos spécifications de miroir parfaites pour la fabrication.",
                step_dims: "1. Dimensions",
                lbl_width: "Largeur (cm)",
                lbl_height: "Hauteur (cm)",
                step_shape: "2. Forme",
                shape_rect: "Rectangle",
                shape_round: "Rond",
                shape_capsule: "Capsule",
                shape_oval: "Ovale",
                step_frame: "3. Matériau du Cadre",
                frame_none: "Sans Cadre",
                frame_alum: "Aluminium (Noir)",
                frame_brass: "Laiton Brossé",
                frame_wood: "Bois Massif",
                step_func: "4. Fonctions Intelligentes",
                func_bt: "Audio Bluetooth",
                func_fog: "Système Anti-buée",
                func_rgb: "Rétroéclairage RGB",
                func_disp: "Affichage Heure/Temp",
                func_gest: "Contrôle Gestuel",
                btn_add_config: "Ajouter la Configuration à la Demande",
                // AI Design Lab
                design_title: "Consultant en Design IA",
                design_subtitle: "Deux façons d'innover : Décrivez votre vision textuellement, ou téléchargez une photo de votre espace pour une analyse visuelle.",
                opt1_title: "Option 1 : Texte vers Spécification",
                opt1_label: "Décrivez votre idée :",
                btn_generate: "Générer le Concept",
                opt2_title: "Option 2 : Analyseur Visuel de Pièce",
                opt2_desc: "Notre IA analysera le style intérieur, l'éclairage et la palette de couleurs de votre pièce pour recommander les spécifications de miroir parfaites.",
                upload_title: "Télécharger une Photo de Pièce",
                upload_text: "Cliquez pour télécharger",
                upload_sub: "JPG, PNG jusqu'à 5 Mo",
                btn_analyze: "Analyser l'Espace",
                ai_rec_title: "Recommandation IA",
                btn_add_custom: "Ajouter à la Liste",
                btn_close: "Fermer",
                no_img: "Aucune image sélectionnée",
                prompt_ph: "ex., Un grand miroir ovale pour un hall d'hôtel de luxe...",
                // Dynamic
                lbl_view_details: "Voir Détails",
                lbl_model_id: "ID Modèle",
                lbl_dims: "Dimensions",
                lbl_moq: "Qté Min. Commande",
                lbl_mat_feat: "Matériaux & Caractéristiques :",
                btn_add_list: "Ajouter à la Liste",
                btn_ask_q: "Poser une Question",
                toast_added: "Ajouté à la liste"
            }
        };

        // Current Language State
        let currentLang = 'en';
        const langMap = {
            en: "English",
            zh: "Chinese (Simplified)",
            fr: "French"
        };

        // Custom AI Data
        let currentGeneratedDesign = null;

        // Customizer State
        let customConfig = {
            width: 80,
            height: 100,
            shape: 'rect',
            frame: 'none',
            functions: []
        };

        function changeLanguage(lang) {
            currentLang = lang;
            document.getElementById('current-lang-label').innerText = lang;
            
            // 1. Update Static Elements
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(translations[lang][key]) {
                    el.innerText = translations[lang][key];
                }
            });

            // 2. Update Placeholders
            const promptArea = document.getElementById('ai-prompt');
            if (promptArea) promptArea.placeholder = translations[lang]['prompt_ph'] || "Describe your idea...";

            // 3. Re-render Products to update dynamic labels and categories
            const activeCategoryBtn = document.querySelector('.filter-btn.bg-gray-900');
            if (activeCategoryBtn) {
                filterProducts(activeCategoryBtn.dataset.category);
            }

            // 4. Refresh grids
            renderHomePreview(products.slice(0, 3));
        }

        function getTrans(key) {
            return translations[currentLang][key] || key;
        }

        function getCategoryName(catCode) {
            if (catCode === 'wall') return translations[currentLang]['cat_wall'];
            if (catCode === 'floor') return translations[currentLang]['cat_floor'];
            if (catCode === 'vanity') return translations[currentLang]['cat_vanity'];
            return catCode;
        }

        // ... Product Data and Init ...
        // (Product Data same as before)
        // Data
        const products = [
            {
                id: 101,
                name: "The Halo",
                category: "wall",
                image: "https://images.unsplash.com/photo-1618220179428-22790b461013?q=80&w=800&auto=format&fit=crop",
                description: "Minimalist round frameless mirror with ambient LED backing.",
                details: "5mm copper-free silver mirror. IP44 rated LED strip (3000K-6000K). Touch sensor dimmer.",
                dimensions: "60cm / 80cm / 100cm Diameter",
                moq: "50 Units"
            },
            {
                id: 102,
                name: "Gilded Arch",
                category: "floor",
                image: "https://images.unsplash.com/photo-1615873968403-89e068629265?q=80&w=800&auto=format&fit=crop",
                description: "Full-length floor mirror with an antique gold leaf finish.",
                details: "Solid wood frame with hand-applied gold leaf finish. Shatter-proof backing.",
                dimensions: "180cm x 80cm",
                moq: "20 Units"
            },
            {
                id: 103,
                name: "Modern Octagon",
                category: "wall",
                image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?q=80&w=800&auto=format&fit=crop",
                description: "Geometric brass-framed mirror perfect for entryways.",
                details: "Brushed brass metal frame. Deep-set design creates a shadow box effect.",
                dimensions: "70cm x 70cm",
                moq: "100 Units"
            },
            {
                id: 104,
                name: "Noir Vanity",
                category: "vanity",
                image: "https://images.unsplash.com/photo-1620626011761-996317b8d101?q=80&w=800&auto=format&fit=crop",
                description: "Matte black bathroom mirror with anti-fog coating.",
                details: "Aluminum alloy frame (Matte Black). Built-in defogger pad. Hardwired.",
                dimensions: "60cm x 90cm",
                moq: "200 Units"
            },
            {
                id: 105,
                name: "The leaning Tower",
                category: "floor",
                image: "https://images.unsplash.com/photo-1594912765369-24b96618f119?q=80&w=800&auto=format&fit=crop",
                description: "Oversized rustic wood frame leaning mirror.",
                details: "Reclaimed pine wood frame with natural stain. Heavy-duty construction.",
                dimensions: "200cm x 100cm",
                moq: "15 Units"
            },
            {
                id: 106,
                name: "Sunburst Art",
                category: "wall",
                image: "https://images.unsplash.com/photo-1612152668444-c192723a7854?q=80&w=800&auto=format&fit=crop",
                description: "Decorative accent mirror with gold spike design.",
                details: "Iron frame with electroplated gold finish. Central beveled mirror.",
                dimensions: "90cm Diameter",
                moq: "50 Units"
            },
            {
                id: 107,
                name: "Capsule Lite",
                category: "vanity",
                image: "https://images.unsplash.com/photo-1595515106969-1ce29566ff1c?q=80&w=800&auto=format&fit=crop",
                description: "Pill-shaped bathroom mirror with front-facing light.",
                details: "Frosted edge LED lighting. Bluetooth speaker option available.",
                dimensions: "50cm x 100cm",
                moq: "100 Units"
            },
            {
                id: 108,
                name: "Industrial Grid",
                category: "wall",
                image: "https://images.unsplash.com/photo-1616046229478-9901c5536a45?q=80&w=800&auto=format&fit=crop",
                description: "Window-pane style mirror with black metal muntins.",
                details: "Powder-coated steel grid. Perfect for loft style interiors.",
                dimensions: "120cm x 80cm",
                moq: "40 Units"
            }
        ];

        let cart = [];

        // Initialization
        function init() {
            renderCatalog(products);
            renderHomePreview(products.slice(0, 3));
            updateCartUI();
            updateCustomPreview(); // Init customizer
        }

        // Navigation / Routing System
        function navigateTo(viewId) {
            // Hide all views
            document.querySelectorAll('.page-view').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show selected view
            const selectedView = document.getElementById(`view-${viewId}`);
            if (selectedView) {
                selectedView.classList.add('active');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // --- CUSTOMIZER LOGIC ---
        function selectOption(element, type, value) {
            // Remove selected class from siblings
            const parent = element.parentElement;
            Array.from(parent.children).forEach(child => child.classList.remove('selected'));
            
            // Add selected class
            element.classList.add('selected');
            
            // Update State
            customConfig[type] = value;
            
            updateCustomPreview();
        }

        function updateCustomPreview() {
            // Get dimensions
            const wInput = document.getElementById('cust-width');
            const hInput = document.getElementById('cust-height');
            customConfig.width = wInput.value;
            customConfig.height = hInput.value;
            
            // Update text displays
            document.getElementById('val-width').innerText = customConfig.width;
            document.getElementById('val-height').innerText = customConfig.height;

            // Get functions
            customConfig.functions = [];
            document.querySelectorAll('.cust-func:checked').forEach(cb => {
                customConfig.functions.push(cb.value);
            });

            // Update Visual Preview
            const preview = document.getElementById('preview-mirror');
            
            // 1. Aspect Ratio (Max width/height constraints for display)
            const maxWidth = 250; 
            const scale = Math.min(maxWidth / customConfig.width, 350 / customConfig.height);
            
            preview.style.width = (customConfig.width * 2) + 'px'; // Multiplier for visual impact
            preview.style.height = (customConfig.height * 2) + 'px';

            // 2. Shape
            preview.style.borderRadius = '0';
            if (customConfig.shape === 'round') preview.style.borderRadius = '50%';
            if (customConfig.shape === 'capsule') preview.style.borderRadius = '9999px';
            if (customConfig.shape === 'oval') preview.style.borderRadius = '50%';

            // 3. Frame
            preview.style.border = 'none';
            if (customConfig.frame === 'aluminum') preview.style.border = '8px solid #1a1a1a';
            if (customConfig.frame === 'brass') preview.style.border = '8px solid #d4af37';
            if (customConfig.frame === 'wood') preview.style.border = '12px solid #78350f';

            // Update Summary Text
            const summaryEl = document.getElementById('preview-summary');
            const funcText = customConfig.functions.length > 0 ? customConfig.functions.join(', ') : "No Smart Functions";
            summaryEl.innerHTML = `
                <li>${customConfig.width}cm x ${customConfig.height}cm</li>
                <li>${document.querySelector(`[data-val="${customConfig.shape}"] span`).innerText}</li>
                <li>${document.querySelector(`[data-val="${customConfig.frame}"] span`).innerText}</li>
                <li>${funcText}</li>
            `;
        }

        function addCustomConfigToCart() {
            const funcText = customConfig.functions.length > 0 ? customConfig.functions.join(', ') : "None";
            const item = {
                id: 'conf-' + Date.now(),
                name: "Custom Configuration",
                description: `${customConfig.width}x${customConfig.height}cm, ${customConfig.shape}, ${customConfig.frame}`,
                specs: `**Dimensions:** ${customConfig.width}cm x ${customConfig.height}cm\n**Shape:** ${customConfig.shape}\n**Frame:** ${customConfig.frame}\n**Functions:** ${funcText}`,
                isCustom: true,
                quantity: 1
            };
            cart.push(item);
            updateCartUI();
            showToast(getTrans('toast_added'));
            toggleCart();
        }

        // --- GEMINI AI FEATURES (UPDATED FOR LOCALE) ---
        
        function setPrompt(text) {
            document.getElementById('ai-prompt').value = text;
            window.scrollTo({ top: 300, behavior: 'smooth' });
        }

        async function generateDesign() {
            const promptInput = document.getElementById('ai-prompt').value;
            const btn = document.getElementById('btn-generate');
            const outputSection = document.getElementById('ai-output-section');
            const resultDiv = document.getElementById('ai-result-content');

            if (!promptInput.trim()) {
                showToast("Please describe your idea first.");
                return;
            }

            const originalText = btn.innerHTML;
            btn.innerHTML = `<i class="fa-solid fa-spinner fa-spin"></i> Processing...`;
            btn.disabled = true;
            resultDiv.innerHTML = '<div class="text-center py-10"><i class="fa-solid fa-wand-magic-sparkles text-accent text-4xl sparkle-loader"></i><p class="mt-4 text-gray-500">Consulting AI Architect...</p></div>';
            outputSection.classList.remove('hidden');
            outputSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            try {
                // Inject Language Instruction
                const targetLang = langMap[currentLang] || "English";
                const systemInstruction = `You are an expert industrial designer for Lumina Mirrors. Convert the user's idea into a professional manufacturing spec. 
                Output Markdown with headers: '### Concept Name', '### Specs', '### Features', '### Why This Works'.
                IMPORTANT: Output the entire response in ${targetLang} language.`;
                
                const userQuery = `Create a mirror design specification for: "${promptInput}"`;

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: userQuery }] }],
                        systemInstruction: { parts: [{ text: systemInstruction }] }
                    })
                });

                if (!response.ok) throw new Error('AI Design Failed');
                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;
                
                currentGeneratedDesign = {
                    id: 'custom-' + Date.now(),
                    name: "Custom AI Design",
                    description: promptInput,
                    specs: aiText,
                    isCustom: true,
                    quantity: 1
                };

                resultDiv.innerHTML = marked.parse(aiText);

            } catch (error) {
                console.error(error);
                resultDiv.innerHTML = `<div class="text-red-500 text-center">Generation failed. Try again.</div>`;
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function analyzeRoom() {
            if (!currentImageBase64) return;

            const btn = document.getElementById('btn-analyze');
            const outputSection = document.getElementById('ai-output-section');
            const resultDiv = document.getElementById('ai-result-content');

            const originalText = btn.innerHTML;
            btn.innerHTML = `<i class="fa-solid fa-spinner fa-spin"></i> Analyzing...`;
            btn.disabled = true;
            outputSection.classList.remove('hidden');
            resultDiv.innerHTML = '<div class="text-center py-10"><i class="fa-solid fa-eye text-accent text-4xl sparkle-loader"></i><p class="mt-4 text-gray-500">Analyzing interior style...</p></div>';
            outputSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            try {
                const targetLang = langMap[currentLang] || "English";
                const prompt = `Analyze this room's interior design style, color palette, and lighting. 
                Based on this, recommend a specific mirror design (Shape, Frame Material, Features) that would perfectly complement the space. 
                Provide manufacturing specs. 
                IMPORTANT: Output the response in ${targetLang} language.`;
                
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [
                                { text: prompt },
                                { inlineData: { mimeType: "image/jpeg", data: currentImageBase64 } }
                            ]
                        }]
                    })
                });

                if (!response.ok) throw new Error('Vision Analysis Failed');
                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;

                currentGeneratedDesign = {
                    id: 'vision-' + Date.now(),
                    name: "AI Room Recommendation",
                    description: "Based on uploaded room photo",
                    specs: aiText,
                    isCustom: true,
                    quantity: 1
                };

                resultDiv.innerHTML = marked.parse(aiText);

            } catch (error) {
                console.error(error);
                resultDiv.innerHTML = `<div class="text-red-500 text-center">Analysis failed. Ensure image is < 4MB JPG/PNG.</div>`;
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        function addCustomToCart() {
            if (!currentGeneratedDesign) return;
            cart.push(currentGeneratedDesign);
            updateCartUI();
            showToast(getTrans('toast_added'));
            document.getElementById('ai-output-section').classList.add('hidden');
        }

        // Chatbot
        function toggleChat() {
            const window = document.getElementById('chat-window');
            if (window.classList.contains('hidden')) {
                window.classList.remove('hidden');
                setTimeout(() => {
                    window.classList.remove('scale-95', 'opacity-0');
                    document.getElementById('chat-input').focus();
                }, 10);
            } else {
                window.classList.add('scale-95', 'opacity-0');
                setTimeout(() => window.classList.add('hidden'), 300);
            }
        }

        async function sendChatMessage() {
            const inputEl = document.getElementById('chat-input');
            const msg = inputEl.value.trim();
            if (!msg) return;

            const chatContainer = document.getElementById('chat-messages');
            chatContainer.innerHTML += `<div class="message user">${msg}</div>`;
            inputEl.value = '';
            chatContainer.scrollTop = chatContainer.scrollHeight;

            const typingId = 'typing-' + Date.now();
            chatContainer.innerHTML += `
                <div id="${typingId}" class="message bot typing-indicator">
                    <span></span><span></span><span></span>
                </div>
            `;
            chatContainer.scrollTop = chatContainer.scrollHeight;

            try {
                const targetLang = langMap[currentLang] || "English";
                const productContext = products.map(p => `${p.name} (${p.category}): ${p.description}. MOQ: ${p.moq}. Specs: ${p.details}`).join('\n');
                
                const systemPrompt = `You are a helpful sales assistant for Lumina Mirrors (OEM/ODM Factory). 
                Use this product data to answer questions: ${productContext}.
                If asked about things not in the catalog, explain that we do custom manufacturing (ODM). 
                Keep answers short (under 50 words) and professional.
                IMPORTANT: Reply in ${targetLang}.`;

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: msg }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                });

                const data = await response.json();
                const reply = data.candidates[0].content.parts[0].text;

                document.getElementById(typingId).remove();
                chatContainer.innerHTML += `<div class="message bot">${marked.parse(reply)}</div>`;

            } catch (error) {
                document.getElementById(typingId).remove();
                chatContainer.innerHTML += `<div class="message bot text-red-500">System offline.</div>`;
            }
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Vision Analysis Image Helper
        let currentImageBase64 = null;

        function handleImagePreview(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('image-preview').src = e.target.result;
                    document.getElementById('image-preview').classList.remove('hidden');
                    document.getElementById('image-placeholder').classList.add('hidden');
                    
                    currentImageBase64 = e.target.result.split(',')[1];
                    
                    const btn = document.getElementById('btn-analyze');
                    btn.disabled = false;
                    btn.classList.remove('bg-gray-300', 'cursor-not-allowed');
                    btn.classList.add('bg-accent', 'hover:bg-yellow-600');
                }
                reader.readAsDataURL(file);
            }
        }

        // Standard Features
        function showProductDetail(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            const container = document.getElementById('detail-container');
            // Localize Detail View
            container.innerHTML = `
                <div class="h-[500px] bg-gray-100 rounded-lg overflow-hidden shadow-lg">
                    <img src="${product.image}" class="w-full h-full object-cover" alt="${product.name}">
                </div>
                <div>
                    <span class="text-accent font-bold tracking-wider uppercase text-sm">${getCategoryName(product.category)} Series</span>
                    <h1 class="text-4xl font-serif font-bold text-gray-900 mt-2 mb-4">${product.name}</h1>
                    <p class="text-xl text-gray-600 mb-6">${product.description}</p>
                    
                    <div class="bg-gray-50 p-6 rounded-lg border border-gray-100 mb-8">
                        <h3 class="font-bold mb-4">${getTrans('lbl_mat_feat')}</h3>
                        <div class="grid grid-cols-1 gap-4 text-sm">
                            <div class="flex justify-between border-b border-gray-200 pb-2">
                                <span class="text-gray-500">${getTrans('lbl_model_id')}</span>
                                <span class="font-medium">#${product.id}</span>
                            </div>
                            <div class="flex justify-between border-b border-gray-200 pb-2">
                                <span class="text-gray-500">${getTrans('lbl_dims')}</span>
                                <span class="font-medium">${product.dimensions}</span>
                            </div>
                            <div class="flex justify-between border-b border-gray-200 pb-2">
                                <span class="text-gray-500">${getTrans('lbl_moq')}</span>
                                <span class="font-medium text-accent">${product.moq}</span>
                            </div>
                            <div class="mt-2 text-gray-600">
                                ${product.details}
                            </div>
                        </div>
                    </div>

                    <div class="flex gap-4">
                        <button onclick="addToCart(${product.id})" class="flex-1 bg-gray-900 text-white py-4 font-bold rounded hover:bg-accent transition shadow-lg">
                            ${getTrans('btn_add_list')}
                        </button>
                        <button onclick="navigateTo('contact')" class="px-8 py-4 border border-gray-300 rounded font-bold hover:bg-gray-50 transition">
                            ${getTrans('btn_ask_q')}
                        </button>
                    </div>
                </div>
            `;
            navigateTo('product-detail');
        }

        function renderHomePreview(items) {
            const grid = document.getElementById('home-product-grid');
            grid.innerHTML = items.map(product => createProductCard(product)).join('');
        }

        function renderCatalog(items) {
            const grid = document.getElementById('catalog-grid');
            grid.innerHTML = items.map(product => createProductCard(product)).join('');
        }

        function createProductCard(product) {
            return `
                <div class="group fade-in cursor-pointer" onclick="showProductDetail(${product.id})">
                    <div class="relative overflow-hidden bg-gray-100 mb-4 h-80 w-full rounded-md">
                        <img src="${product.image}" alt="${product.name}" class="h-full w-full object-cover transform group-hover:scale-105 transition duration-700">
                        <div class="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition duration-300"></div>
                        <div class="absolute bottom-4 left-4 right-4 flex justify-between items-end opacity-0 group-hover:opacity-100 transition duration-300 translate-y-4 group-hover:translate-y-0">
                            <span class="bg-white text-gray-900 text-xs font-bold px-2 py-1 rounded">${getTrans('lbl_view_details')}</span>
                        </div>
                    </div>
                    <div>
                        <span class="text-xs text-accent uppercase tracking-wider font-bold">${getCategoryName(product.category)}</span>
                        <h3 class="text-lg font-serif font-bold text-gray-900 mt-1 group-hover:text-accent transition">${product.name}</h3>
                        <p class="text-sm text-gray-500 truncate">${product.description}</p>
                    </div>
                </div>
            `;
        }

        function filterProducts(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.category === category) {
                    btn.classList.remove('bg-white', 'text-gray-600', 'border-gray-300');
                    btn.classList.add('bg-gray-900', 'text-white', 'border-gray-900');
                } else {
                    btn.classList.add('bg-white', 'text-gray-600', 'border-gray-300');
                    btn.classList.remove('bg-gray-900', 'text-white', 'border-gray-900');
                }
            });

            if (category === 'all') {
                renderCatalog(products);
            } else {
                const filtered = products.filter(p => p.category === category);
                renderCatalog(filtered);
            }
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            updateCartUI();
            showToast(getTrans('toast_added'));
        }

        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartUI();
        }

        function removeFromCartString(idString) {
            cart = cart.filter(item => item.id !== idString);
            updateCartUI();
        }

        function updateCartUI() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const countEl = document.getElementById('cart-count');
            countEl.innerText = totalItems;
            countEl.style.opacity = totalItems > 0 ? '1' : '0';

            const container = document.getElementById('cart-items-container');
            container.innerHTML = '';
            const emptyMsg = document.getElementById('empty-cart-msg');

            if (cart.length === 0) {
                emptyMsg.classList.remove('hidden');
            } else {
                emptyMsg.classList.add('hidden');
                cart.forEach(item => {
                    const el = document.createElement('div');
                    el.className = 'flex gap-4';
                    
                    if (item.isCustom) {
                         el.innerHTML = `
                            <div class="h-16 w-16 flex-shrink-0 overflow-hidden rounded-md border border-accent bg-accent/10 flex items-center justify-center">
                                <i class="fa-solid fa-wand-magic-sparkles text-accent text-xl"></i>
                            </div>
                            <div class="flex flex-1 flex-col justify-center">
                                <div class="flex justify-between text-sm font-medium text-gray-900">
                                    <h3>Custom Design</h3>
                                    <button onclick="removeFromCartString('${item.id}')" class="text-accent hover:text-red-500"><i class="fa-solid fa-trash"></i></button>
                                </div>
                                <p class="text-xs text-gray-500 truncate w-40">${item.description}</p>
                            </div>
                        `;
                    } else {
                        el.innerHTML = `
                            <div class="h-16 w-16 flex-shrink-0 overflow-hidden rounded-md border border-gray-200">
                                <img src="${item.image}" alt="${item.name}" class="h-full w-full object-cover">
                            </div>
                            <div class="flex flex-1 flex-col justify-center">
                                <div class="flex justify-between text-sm font-medium text-gray-900">
                                    <h3>${item.name}</h3>
                                    <button onclick="removeFromCart(${item.id})" class="text-accent hover:text-red-500"><i class="fa-solid fa-trash"></i></button>
                                </div>
                                <p class="text-xs text-gray-500">Qty: ${item.quantity} | ID: #${item.id}</p>
                            </div>
                        `;
                    }
                    container.appendChild(el);
                });
            }
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            const panel = document.getElementById('cart-panel');
            if (modal.classList.contains('hidden')) {
                modal.classList.remove('hidden');
                setTimeout(() => panel.classList.remove('translate-x-full'), 10);
                document.body.style.overflow = 'hidden';
            } else {
                panel.classList.add('translate-x-full');
                setTimeout(() => modal.classList.add('hidden'), 300);
                document.body.style.overflow = 'auto';
            }
        }

        function sendInquiry() {
            if (cart.length === 0) {
                showToast(getTrans('cart_empty'));
                return;
            }
            let body = "Hello Lumina Team,\n\nI am interested in a quote for:\n\n";
            
            cart.forEach(item => {
                if (item.isCustom) {
                    body += `\n[CUSTOM DESIGN REQUEST]\nConcept: ${item.description}\nSpecifications Generated:\n${item.specs}\n-----------------------------------\n`;
                } else {
                    body += `- ${item.name} (ID: ${item.id}, Qty: ${item.quantity})\n`;
                }
            });
            
            body += "\nPlease contact me with details.\n\nRegards,";
            
            const mailtoLink = `mailto:sales@luminamirrors.com?subject=Bulk Inquiry&body=${encodeURIComponent(body)}`;
            
            const link = document.createElement('a');
            link.href = mailtoLink;
            link.target = '_blank'; 
            link.rel = 'noopener noreferrer';
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            setTimeout(() => {
                document.body.removeChild(link);
            }, 100);

            showToast("Opening email client...");
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').innerText = msg;
            toast.classList.remove('opacity-0', 'translate-y-5');
            setTimeout(() => toast.classList.add('opacity-0', 'translate-y-5'), 3000);
        }

        // Start
        init();

    </script>
</body>
</html>
